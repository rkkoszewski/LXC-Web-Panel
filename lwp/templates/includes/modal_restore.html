<div id="restoreCT" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="restoreCTLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h3 id="restoreCTLabel">Restore container</h3>
    </div>
    <div class="modal-body">
        <div class="control-group">
            <div class="controls input-prepend">
                <span class="add-on"><i class="icon-folder-open"></i></span>
                <input id="inputName" type="text" pattern="^\w[\w.-]+$" placeholder="Name" name="name">
            </div>

            <div class="controls input-prepend pull-right">
                <span class="add-on"><i class="icon-download-alt"></i></span>
                <input id="inputFilter" type="text" pattern="^\w[\w.-]+$" placeholder="Filter" name="filter">
            </div>
        </div>
        <div>
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th width="100%">Name</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td colspan="2">Unable to load the list..</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="modal-footer">
        <div class="buttons-modal-footer">
            <button class="btn btn-small" data-dismiss="modal" aria-hidden="true">Close</button>
        </div>
        <div class="loader-modal-footer hide">
            <div class="progress progress-striped active">
                <div class="bar" style="width: 100%;"></div>
            </div>
            <p class="text-center">This could take a while...</p>
        </div>
    </div>
    <form method="post" action="{{ url_for('main.restore_container') }}" name="restore_container" style="margin:0;"></form>
</div>
<script>
    window.onload = function() {
        var $tbody = $("#restoreCT tbody");
    
        $('#restoreCT').on('show', function(){
            $tbody.html('<tr><td colspan="2">Loading List...</td></tr>');
            $.getJSON('{{ url_for('main.refresh_backups', name='containers') }}', function(data) {
                $tbody.empty();
                for (i in data) {
                  $tbody.append($('<tr><td style="text-align: left;">' + data[i] + '</td><td><div class="btn-group"><button class="btn btn-small" onclick="restoreBackup(this)">Restore</button><button class="btn btn-small btn-danger"  onclick="deleteBackup(this)">Delete</button></div></td></tr>'));
                }
            });
        });
        
        $('#restoreCT #inputFilter').on('input', function(){
            var value = this.value;
            $tbody.children().each(function () {
                var $this = $(this);
                if($this.children(":first").text().startsWith(value)){
                    $this.removeClass('hide');
                }else{
                    $this.addClass('hide');
                }
            });
        });
    };
    
    function deleteBackup(btn_node){
        alert("DELETE");
    }
    
    function restoreBackup(btn_node){
        alert("RESTORE");
    }
</script>
